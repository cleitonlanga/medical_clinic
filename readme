# ğŸ¥ Sistema de Agendamento de Consultas MÃ©dicas

Sistema completo para gerenciamento de consultas mÃ©dicas com perfis de paciente, mÃ©dico e administrador.

## ğŸ“‹ Ãndice

- [Funcionalidades](#funcionalidades)
- [Tecnologias](#tecnologias)
- [Estrutura do Projeto](#estrutura-do-projeto)
- [InstalaÃ§Ã£o](#instalaÃ§Ã£o)
- [ConfiguraÃ§Ã£o](#configuraÃ§Ã£o)
- [Uso](#uso)
- [API Endpoints](#api-endpoints)
- [Troubleshooting](#troubleshooting)

---

## âœ¨ Funcionalidades

### ğŸ‘¤ **Paciente**
- âœ… Cadastro e login
- âœ… Escolher especialidade mÃ©dica
- âœ… Selecionar mÃ©dico
- âœ… Visualizar horÃ¡rios disponÃ­veis
- âœ… Agendar consultas
- âœ… Visualizar histÃ³rico de consultas
- âœ… Cancelar consultas

### ğŸ‘¨â€âš•ï¸ **MÃ©dico**
- âœ… Visualizar agenda de consultas
- âœ… Confirmar consultas agendadas
- âœ… Marcar consultas como concluÃ­das
- âœ… Cancelar consultas
- âœ… Ver informaÃ§Ãµes dos pacientes

### ğŸ”§ **Administrador**
- âœ… Cadastrar especialidades mÃ©dicas
- âœ… Cadastrar mÃ©dicos e pacientes
- âœ… Vincular mÃ©dicos a especialidades
- âœ… Gerenciar usuÃ¡rios
- âœ… Visualizar estatÃ­sticas do sistema

---

## ğŸ› ï¸ Tecnologias

### Backend
- PHP 7.4+
- MySQL 5.7+
- PDO para conexÃ£o segura com banco de dados

### Frontend
- HTML5
- CSS3 (com variÃ¡veis CSS e Grid/Flexbox)
- JavaScript ES6+ (Vanilla)

### Servidor
- Apache 2.4+
- XAMPP / WAMP / LAMP

---

## ğŸ“ Estrutura do Projeto

```
medical-appointment-system/
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ database.php          # ConfiguraÃ§Ã£o do banco de dados
â”‚   â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ login.php              # Endpoint de login
â”‚   â”‚   â”œâ”€â”€ register.php           # Endpoint de registro
â”‚   â”‚   â”œâ”€â”€ especialidades.php     # CRUD de especialidades
â”‚   â”‚   â”œâ”€â”€ medicos.php            # Listagem de mÃ©dicos
â”‚   â”‚   â”œâ”€â”€ disponibilidades.php   # HorÃ¡rios disponÃ­veis
â”‚   â”‚   â”œâ”€â”€ consultas.php          # CRUD de consultas
â”‚   â”‚   â””â”€â”€ admin.php              # FunÃ§Ãµes administrativas
â”‚   â”‚
â”‚   â””â”€â”€ database.sql               # Script de criaÃ§Ã£o do banco
â”‚
â””â”€â”€ frontend/
    â”œâ”€â”€ assets/
    â”‚   â”œâ”€â”€ css/
    â”‚   â”‚   â””â”€â”€ style.css          # Estilos globais
    â”‚   â””â”€â”€ js/
    â”‚       â””â”€â”€ app.js             # FunÃ§Ãµes JavaScript
    â”‚
    â”œâ”€â”€ index.html                 # PÃ¡gina inicial
    â”œâ”€â”€ login.html                 # PÃ¡gina de login
    â”œâ”€â”€ register.html              # PÃ¡gina de cadastro
    â”œâ”€â”€ paciente-dashboard.html    # Dashboard do paciente
    â”œâ”€â”€ medico-dashboard.html      # Dashboard do mÃ©dico
    â””â”€â”€ admin-dashboard.html       # Dashboard administrativo
```

---

## ğŸš€ InstalaÃ§Ã£o

### 1. PrÃ©-requisitos

- XAMPP, WAMP ou servidor similar instalado
- Navegador web moderno (Chrome, Firefox, Edge)
- Editor de cÃ³digo (VS Code recomendado)

### 2. Download e ConfiguraÃ§Ã£o

```bash
# 1. Clone ou baixe o projeto
# 2. Coloque a pasta no diretÃ³rio do servidor

# Para XAMPP (Windows):
C:\xampp\htdocs\medical-appointment-system\

# Para XAMPP (Linux):
/opt/lampp/htdocs/medical-appointment-system/

# Para WAMP:
C:\wamp64\www\medical-appointment-system\
```

### 3. Configurar Banco de Dados

#### OpÃ§Ã£o A: Via phpMyAdmin

1. Acesse: `http://localhost/phpmyadmin`
2. Clique em "Novo" para criar um banco de dados
3. Nome: `sistema_consultas`
4. CodificaÃ§Ã£o: `utf8mb4_general_ci`
5. VÃ¡ para a aba "SQL"
6. Cole o conteÃºdo do arquivo `backend/database.sql`
7. Clique em "Executar"

#### OpÃ§Ã£o B: Via Linha de Comando

```bash
# Entre no MySQL
mysql -u root -p

# Execute os comandos:
CREATE DATABASE sistema_consultas;
USE sistema_consultas;
SOURCE /caminho/para/backend/database.sql;
```

### 4. Configurar ConexÃ£o com Banco

Edite `backend/config/database.php`:

```php
private $host = "localhost";
private $db_name = "sistema_consultas";
private $username = "root";          // Seu usuÃ¡rio MySQL
private $password = "";              // Sua senha MySQL
```

### 5. Configurar URL da API

Edite `frontend/assets/js/app.js` (linha 1):

```javascript
const API_URL = 'http://localhost/medical-appointment-system/backend/api';
```

**Ajuste conforme sua configuraÃ§Ã£o:**
- Se usar porta diferente: `http://localhost:8080/...`
- Se usar domÃ­nio local: `http://meusite.local/...`

---

## âš™ï¸ ConfiguraÃ§Ã£o

### Estrutura do Banco de Dados

#### Tabela: `users`
```sql
- id (INT, PK, AUTO_INCREMENT)
- nome (VARCHAR)
- email (VARCHAR, UNIQUE)
- senha (VARCHAR) # Hash bcrypt
- tipo (ENUM: 'paciente', 'medico', 'admin')
- telefone (VARCHAR)
- created_at (TIMESTAMP)
```

#### Tabela: `especialidades`
```sql
- id (INT, PK, AUTO_INCREMENT)
- nome (VARCHAR)
- descricao (TEXT)
```

#### Tabela: `medicos_especialidades`
```sql
- id (INT, PK, AUTO_INCREMENT)
- medico_id (INT, FK â†’ users.id)
- especialidade_id (INT, FK â†’ especialidades.id)
```

#### Tabela: `disponibilidades`
```sql
- id (INT, PK, AUTO_INCREMENT)
- medico_id (INT, FK â†’ users.id)
- dia_semana (ENUM)
- hora_inicio (TIME)
- hora_fim (TIME)
```

#### Tabela: `consultas`
```sql
- id (INT, PK, AUTO_INCREMENT)
- paciente_id (INT, FK â†’ users.id)
- medico_id (INT, FK â†’ users.id)
- data_consulta (DATE)
- hora_consulta (TIME)
- status (ENUM)
- observacoes (TEXT)
- created_at (TIMESTAMP)
```

### UsuÃ¡rio Admin PadrÃ£o

```
Email: admin@sistema.com
Senha: admin123
```

**âš ï¸ IMPORTANTE:** Altere esta senha apÃ³s o primeiro login!

---

## ğŸ’» Uso

### 1. Iniciar o Servidor

**XAMPP:**
- Abra o XAMPP Control Panel
- Inicie Apache e MySQL
- Acesse: `http://localhost/medical-appointment-system/frontend/index.html`

**WAMP:**
- Inicie o WAMP Server
- Acesse: `http://localhost/medical-appointment-system/frontend/index.html`

### 2. Primeiro Acesso

#### Como Administrador:
1. Acesse `login.html`
2. Use as credenciais: `admin@sistema.com` / `admin123`
3. Cadastre especialidades
4. Cadastre mÃ©dicos e vincule Ã s especialidades

#### Como Paciente:
1. Acesse `register.html`
2. Preencha o formulÃ¡rio
3. Selecione tipo "Paciente"
4. FaÃ§a login
5. Agende uma consulta

#### Como MÃ©dico:
1. Admin deve cadastrar o mÃ©dico
2. FaÃ§a login com suas credenciais
3. Visualize e gerencie sua agenda

---

## ğŸ”Œ API Endpoints

### AutenticaÃ§Ã£o

#### `POST /api/login.php`
Realiza login no sistema.

**Request:**
```json
{
  "email": "usuario@email.com",
  "senha": "senha123"
}
```

**Response:**
```json
{
  "success": true,
  "user": {
    "id": 1,
    "nome": "Nome do UsuÃ¡rio",
    "email": "usuario@email.com",
    "tipo": "paciente"
  }
}
```

#### `POST /api/register.php`
Cadastra novo usuÃ¡rio.

**Request:**
```json
{
  "nome": "Nome Completo",
  "email": "email@example.com",
  "senha": "senha123",
  "telefone": "(11) 99999-9999",
  "tipo": "paciente"
}
```

### Especialidades

#### `GET /api/especialidades.php`
Lista todas as especialidades.

**Response:**
```json
[
  {
    "id": 1,
    "nome": "Cardiologia",
    "descricao": "Especialidade mÃ©dica..."
  }
]
```

#### `POST /api/especialidades.php`
Cria nova especialidade (admin).

**Request:**
```json
{
  "nome": "Pediatria",
  "descricao": "Especialidade dedicada..."
}
```

### MÃ©dicos

#### `GET /api/medicos.php?especialidade_id=1`
Lista mÃ©dicos por especialidade.

**Response:**
```json
[
  {
    "id": 2,
    "nome": "Dr. JoÃ£o Silva",
    "email": "joao@email.com",
    "especialidade": "Cardiologia"
  }
]
```

### Consultas

#### `GET /api/consultas.php?user_id=1&tipo=paciente`
Lista consultas do usuÃ¡rio.

#### `POST /api/consultas.php`
Agenda nova consulta.

**Request:**
```json
{
  "paciente_id": 1,
  "medico_id": 2,
  "data_consulta": "2024-12-15",
  "hora_consulta": "14:00:00",
  "observacoes": "Dor no peito"
}
```

#### `PUT /api/consultas.php`
Atualiza status da consulta.

**Request:**
```json
{
  "id": 1,
  "status": "confirmada"
}
```

#### `DELETE /api/consultas.php?id=1`
Cancela consulta.

---

## ğŸ› Troubleshooting

### Problema: Erro de ConexÃ£o com o Banco

**SoluÃ§Ã£o:**
1. Verifique se MySQL estÃ¡ rodando
2. Confirme credenciais em `database.php`
3. Teste a conexÃ£o:
```bash
mysql -u root -p
USE sistema_consultas;
SHOW TABLES;
```

### Problema: CORS Error

**SoluÃ§Ã£o:**
Adicione no inÃ­cio de cada arquivo PHP:
```php
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE');
header('Access-Control-Allow-Headers: Content-Type');
```

### Problema: Senhas nÃ£o funcionam

**SoluÃ§Ã£o:**
Gerar novo hash de senha:
```php
<?php
echo password_hash('suasenha', PASSWORD_DEFAULT);
?>
```

### Problema: NÃ£o mostra horÃ¡rios disponÃ­veis

**SoluÃ§Ã£o:**
1. Verifique se o mÃ©dico tem disponibilidades cadastradas
2. Insira manualmente no banco:
```sql
INSERT INTO disponibilidades (medico_id, dia_semana, hora_inicio, hora_fim)
VALUES (2, 'segunda', '08:00:00', '17:00:00');
```

### Problema: 404 Not Found

**SoluÃ§Ã£o:**
1. Verifique se Apache estÃ¡ rodando
2. Confirme o caminho correto:
```
http://localhost/medical-appointment-system/frontend/index.html
```
3. Verifique permissÃµes da pasta (Linux):
```bash
chmod -R 755 /opt/lampp/htdocs/medical-appointment-system
```

---

## ğŸ“Š Fluxo de Uso

```
1. Admin cadastra especialidades
   â†“
2. Admin cadastra mÃ©dicos
   â†“
3. Admin vincula mÃ©dico â†’ especialidade
   â†“
4. MÃ©dico define disponibilidade (via banco ou API)
   â†“
5. Paciente se registra
   â†“
6. Paciente agenda consulta
   â†“
7. MÃ©dico confirma consulta
   â†“
8. MÃ©dico conclui consulta
```

---

## ğŸ”’ SeguranÃ§a

### Implementado:
âœ… Hash de senhas com bcrypt
âœ… PDO com prepared statements (proteÃ§Ã£o SQL Injection)
âœ… ValidaÃ§Ã£o de entrada
âœ… SessÃµes seguras

### Para ProduÃ§Ã£o (RecomendaÃ§Ãµes):
- [ ] Implementar HTTPS
- [ ] Adicionar tokens CSRF
- [ ] Implementar JWT para autenticaÃ§Ã£o
- [ ] Rate limiting em APIs
- [ ] Logs de auditoria
- [ ] ValidaÃ§Ã£o mais rigorosa
- [ ] SanitizaÃ§Ã£o de inputs
- [ ] Backup automÃ¡tico do banco

---

## ğŸ“± Responsividade

O sistema Ã© totalmente responsivo e funciona em:
- ğŸ’» Desktop (1920px+)
- ğŸ’» Laptop (1366px)
- ğŸ“± Tablet (768px)
- ğŸ“± Mobile (320px+)

---

## ğŸ¤ Contribuindo

1. FaÃ§a um fork do projeto
2. Crie uma branch: `git checkout -b feature/nova-funcionalidade`
3. Commit: `git commit -m 'Adiciona nova funcionalidade'`
4. Push: `git push origin feature/nova-funcionalidade`
5. Abra um Pull Request

---

## ğŸ“„ LicenÃ§a

Este projeto Ã© livre para uso educacional e pessoal.

---

## ğŸ‘¨â€ğŸ’» Autor

cleiton langa

---

## ğŸ“ Suporte

Para dÃºvidas e problemas:
1. Consulte a seÃ§Ã£o [Troubleshooting](#troubleshooting) ou cleytonlanga10@gmail.com
2. Verifique os logs do Apache/MySQL
3. Revise as configuraÃ§Ãµes do `database.php`

---

**ğŸ‰ Projeto concluÃ­do e funcional!**